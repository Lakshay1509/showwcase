generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model users {
  id         String   @id @default(uuid()) @map("id")
  username   String   @unique @map("username")
  email      String   @unique @map("email")
  name       String
  description String?
  location   String?
  profileImageUrl String? @map("profile_image_url")
  social_media_handles social_media_handles?
  user_tags  user_tags[]
  groups     groups[]  // Added relation field
}

model social_media_handles {
  id               String  @id @default(uuid()) @map("id")
  user_id          String  @unique @map("user_id")
  instagram        String?
  linkedin         String?
  twitter          String?
  github           String?
  facebook         String?
  youtube          String?
  personal_website String? @map("personal_website")
  users            users   @relation(fields: [user_id], references: [id], onDelete: Cascade)
}

model tags {
  id        Int         @id @default(autoincrement()) @map("id")
  name      String      @unique @map("name")
  user_tags user_tags[]
}

model user_tags {
  user_id String @map("user_id")
  tag_id  Int    @map("tag_id")
  tags    tags   @relation(fields: [tag_id], references: [id], onDelete: Cascade)
  users   users  @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@id([user_id, tag_id])
  @@map("user_tags")
}

model tech {
  id         Int      @id @default(autoincrement()) @map("id")
  name       String   @unique @map("name")
  img_url    String?  @unique
  group_techs group_techs[]  // Added relation field
}

model groups {
  id       String @id @default(uuid()) @map("id")
  user_id  String @map("user_id")
  name     String @map("name")
  position Int @default(0)

  users    users  @relation(fields: [user_id], references: [id], onDelete: Cascade)
  group_techs group_techs[]

  @@map("groups")
}

model group_techs {
  group_id String @map("group_id")
  tech_id  Int    @map("tech_id")

  groups groups @relation(fields: [group_id], references: [id], onDelete: Cascade)
  tech   tech   @relation(fields: [tech_id], references: [id], onDelete: Cascade)

  @@id([group_id, tech_id])
  @@map("group_techs")
}


